# クラッシュしてもエラーが出ないときのログの取り方

アプリが落ちても画面に何も出ない場合、次の方法で原因を調べられます。

---

## 方法1: Xcode から実行してクラッシュさせる（いちばん確実）

**Mac + Xcode** がある場合、これが一番原因を特定しやすいです。

1. **Mac** でプロジェクトを開く  
   ```bash
   cd C:\ws\sutesho   # Windows の場合は別の方法で
   ```
   ※ Windows の場合は、後述の「実機のクラッシュレポート」を使う

2. **Xcode** で `ios/sutesho.xcworkspace` を開く（Mac で prebuild 済みの ios/ が必要）

3. 実機またはシミュレータを選び、**▶ Run** で起動

4. **クラッシュする操作**を再現する

5. クラッシュすると **Xcode が止まる**  
   - 画面中央に **「Thread 1: signal SIGABRT」** などのメッセージ  
   - **左の「デバッグナビゲータ」**（アイコン一覧）で **一番上のクラッシュしたスレッド** を選択  
   - 下のエリアに **どのファイルの何行目で落ちたか** が並ぶ

6. その **エラー文** と **スタックトレース（ファイル名と行番号の一覧）** をコピーして、相談時に貼り付ける

---

## 方法2: 実機の「解析データ」からクラッシュレポートを取る

**iPhone / iPad 単体**（Xcode なし）でクラッシュした場合、端末にクラッシュレポートが残ります。

1. **設定** → **プライバシーとセキュリティ** → **解析および改善**  
   - **「解析データを共有」** をオンにしておく（オフでもレポートは端末に残る）

2. **「解析データ」** をタップ

3. 一覧から **アプリ名（捨て写）や日時** でクラッシュを探す  
   - 名前は `JetsamEvent` や `*.ips` など、日時がクラッシュした時刻に近いもの

4. それをタップして中身を表示 → **共有** でメールやメモに送る  
   - または **「“解析データ”のコピー」** で全文コピー

5. その **テキスト全体** を相談時に貼り付ける（長くても大丈夫）

※ クラッシュから **数時間〜1日** 経つと一覧に出てくることがあります。

---

## 方法3: Mac の「コンソール」で実機のログを見る

**Mac + 実機を USB 接続**している場合:

1. 実機で **クラッシュする操作** を再現する直前に準備
2. Mac で **「コンソール」** アプリを起動（Spotlight で「Console」検索）
3. 左で **接続した iPhone** を選択
4. 右上の検索欄に **「sutesho」** や **「捨て写」** を入力
5. クラッシュする操作をして、**クラッシュした瞬間の前後のログ** をコピーして共有

---

## 方法4: JS のエラーを画面に出す（Error Boundary のログ）

**JavaScript 側**で落ちている場合は、すでに入っている Error Boundary がキャッチしている可能性があります。

- クラッシュ時に **赤い画面** や **「問題が発生しました」** のような画面が出る場合は、その画面に **エラー文** が書かれていることがあります  
  - その文をそのままコピーして共有してください

- **何も出ずに一瞬で落ちる**場合は、**ネイティブ（Swift 側）** で落ちていることが多いです  
  - その場合は **方法1（Xcode）** か **方法2（解析データ）** が有効です

---

## まとめ

| 環境 | おすすめの方法 |
|------|----------------|
| Mac + Xcode がある | **方法1**: Xcode で実行 → クラッシュで止まったときのエラーとスタックトレースをコピー |
| Windows だけ / 実機で TestFlight | **方法2**: 設定 → 解析データ → クラッシュした日時のレポートをコピーして共有 |
| Mac + 実機 USB | **方法3**: コンソールで実機を選び、クラッシュ前後のログをコピー |

**「エラー文が何も出ない」** ときは、多くの場合 **端末にクラッシュレポートが保存されている** ので、**方法2の「解析データ」** を一度開いて、該当しそうなレポートがないか確認してみてください。
